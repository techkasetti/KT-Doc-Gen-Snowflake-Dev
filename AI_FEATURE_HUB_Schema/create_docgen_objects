CREATE OR REPLACE PROCEDURE AI_FEATURE_HUB.create_docgen_objects()
RETURNS STRING
LANGUAGE JAVASCRIPT
EXECUTE AS OWNER
AS
$$
var names = [
"docgen_feature_instance_incident_timelines",
"docgen_feature_instance_postmortem_metrics",
"docgen_feature_instance_operational_metrics",
"docgen_feature_instance_alert_correlation",
"docgen_feature_instance_maintenance_feedback",
"docgen_feature_instance_postmortem_links",
"docgen_feature_instance_notification_preferences",
"docgen_feature_instance_integration_health",
"docgen_feature_instance_maintenance_kpis",
"docgen_feature_instance_playbook_usage",
"docgen_feature_instance_postmortem_metrics_rollups",
"docgen_feature_instance_postmortem_notifications",
"docgen_feature_instance_root_cause_tags",
"docgen_feature_instance_root_cause_references",
"docgen_feature_instance_incident_severity_thresholds",
"docgen_feature_instance_incident_suppression_hist",
"docgen_feature_instance_alert_annotation",
"docgen_feature_instance_alert_grouping_rules",
"docgen_feature_instance_alert_grouping_results",
"docgen_feature_instance_escalation_policies",
"docgen_feature_instance_escalation_actions",
"docgen_feature_instance_slo_rollup_configs",
"docgen_feature_instance_slo_rollup_results",
"docgen_feature_instance_anomaly_detection_configs",
"docgen_feature_instance_anomaly_detections",
"docgen_feature_instance_model_explainability_configs",
"docgen_feature_instance_explainability_artifacts",
"docgen_feature_instance_model_drift_alerts",
"docgen_feature_instance_model_performance_history",
"docgen_feature_instance_privacy_audit_entries",
"docgen_feature_instance_data_access_requests",
"docgen_feature_instance_data_access_responses",
"docgen_feature_instance_policy_change_requests",
"docgen_feature_instance_policy_change_decisions",
"docgen_feature_instance_policy_change_audit",
"docgen_feature_instance_access_review_requests",
"docgen_feature_instance_access_review_decisions",
"docgen_feature_instance_access_review_audit",
"docgen_feature_instance_third_party_integration_configs",
"docgen_feature_instance_third_party_integration_health",
"docgen_feature_instance_third_party_notification_logs",
"docgen_feature_instance_runbook_checklists",
"docgen_feature_instance_runbook_checklist_usages",
"docgen_feature_instance_communication_playbooks",
"docgen_feature_instance_comm_playbook_usages",
"docgen_feature_instance_service_dependency_graphs",
"docgen_feature_instance_dependency_changes",
"docgen_feature_instance_operational_risk_register",
"docgen_feature_instance_risk_mitigation_updates",
"docgen_feature_instance_incident_classification_rules",
"docgen_feature_instance_incident_classifications",
"docgen_feature_instance_alert_deduplication_rules",
"docgen_feature_instance_alert_deduplication_results",
"docgen_feature_instance_error_mitigation_actions",
"docgen_feature_instance_error_mitigation_history",
"docgen_feature_instance_capacity_forecasts",
"docgen_feature_instance_capacity_forecast_errors",
"docgen_feature_instance_release_postmortem_checklist",
"docgen_feature_instance_release_postmortem_results",
"docgen_feature_instance_feature_flag_segments",
"docgen_feature_instance_feature_flag_evaluations",
"docgen_feature_instance_change_approvals",
"docgen_feature_instance_change_approval_decisions",
"docgen_feature_instance_change_approval_audit",
"docgen_feature_instance_release_postmortem_actions",
"docgen_feature_instance_release_postmortem_action_updates",
"docgen_feature_instance_telemetry_mapping_configs",
"docgen_feature_instance_telemetry_mapping_hist",
"docgen_feature_instance_kpi_thresholds",
"docgen_feature_instance_kpi_breach_events",
"docgen_feature_instance_visibility_views",
"docgen_feature_instance_visibility_view_access_logs",
"docgen_feature_instance_synthetic_tests",
"docgen_feature_instance_synthetic_test_runs",
"docgen_feature_instance_synthetic_test_alerting",
"docgen_feature_instance_audit_log_exports",
"docgen_feature_instance_audit_log_export_parts",
"docgen_feature_instance_event_replay_jobs",
"docgen_feature_instance_event_replay_job_parts",
"docgen_feature_instance_service_level_reports",
"docgen_feature_instance_service_level_report_subscribers",
"docgen_feature_instance_operational_runbooks",
"docgen_feature_instance_runbook_change_requests",
"docgen_feature_instance_runbook_change_decisions",
"docgen_feature_instance_runbook_change_audit",
"docgen_feature_instance_incident_root_cause_templates",
"docgen_feature_instance_incident_followups",
"docgen_feature_instance_postmortem_participants",
"docgen_feature_instance_incident_metrics_definitions",
"docgen_feature_instance_incident_metric_samples",
"docgen_feature_instance_postmortem_action_priorities",
"docgen_feature_instance_root_cause_analysis_notes",
"docgen_feature_instance_incident_related_services",
"docgen_feature_instance_postmortem_timeline_events",
"docgen_feature_instance_major_incident_declarations",
"docgen_feature_instance_major_incident_communications",
"docgen_feature_instance_incident_cost_estimates",
"docgen_feature_instance_support_ticket_links",
"docgen_feature_instance_postmortem_templates",
"docgen_feature_instance_postmortem_template_usages",
"docgen_feature_instance_engineering_notes",
"docgen_feature_instance_architecture_diagrams",
"docgen_feature_instance_architecture_changes",
"docgen_feature_instance_testing_plans",
"docgen_feature_instance_testing_runs",
"docgen_feature_instance_test_run_results",
"docgen_feature_instance_continuous_validation_configs",
"docgen_feature_instance_continuous_validation_runs",
"docgen_feature_instance_comms_templates",
"docgen_feature_instance_comms_template_usages",
"docgen_feature_instance_third_party_incident_mappings",
"docgen_feature_instance_incident_summaries",
"docgen_feature_instance_incident_summary_views",
"docgen_feature_instance_release_checklists",
"docgen_feature_instance_release_checklist_completions",
"docgen_feature_instance_incident_training_examples",
"docgen_feature_instance_model_call_traces",
"docgen_feature_instance_model_call_explainability_links",
"docgen_feature_instance_model_artifact_refs",
"docgen_feature_instance_model_release_notes",
"docgen_feature_instance_model_rollback_policies",
"docgen_feature_instance_model_rollback_executions",
"docgen_feature_instance_compliance_check_configs",
"docgen_feature_instance_compliance_check_results",
"docgen_feature_instance_compliance_exceptions",
"docgen_feature_instance_backup_catalog",
"docgen_feature_instance_restore_jobs",
"docgen_feature_instance_postmortem_action_templates",
"docgen_feature_instance_action_template_usages",
"docgen_feature_instance_operational_playbooks",
"docgen_feature_instance_playbook_usages",
"docgen_feature_instance_incident_postmortem_integrations",
"docgen_feature_instance_incident_postmortem_integration_runs",
"docgen_feature_instance_incident_tag_templates",
"docgen_feature_instance_incident_tag_template_usages",
"docgen_feature_instance_incident_learning_items",
"docgen_feature_instance_incident_learning_item_updates",
"docgen_feature_instance_postmortem_retrospectives",
"docgen_feature_instance_service_health_dashboards",
"docgen_feature_instance_dashboard_views",
"docgen_feature_instance_kpi_report_templates",
"docgen_feature_instance_kpi_reports",
"docgen_feature_instance_incident_playbook_templates",
"docgen_feature_instance_incident_playbook_runs",
"docgen_feature_instance_postmortem_metrics_alerts",
"docgen_feature_instance_incident_ownership_history",
"docgen_feature_instance_incident_communication_logs",
"docgen_feature_instance_incident_visibility_controls",
"docgen_feature_instance_action_templates_catalog",
"docgen_feature_instance_action_templates_catalog_usages",
"docgen_feature_instance_sla_contracts",
"docgen_feature_instance_sla_breach_notifications",
"docgen_feature_instance_sla_breach_responses",
"docgen_feature_instance_service_resilience_tests",
"docgen_feature_instance_resilience_test_runs",
"docgen_feature_instance_resilience_test_alerts",
"docgen_feature_instance_incident_documentation_refs",
"docgen_feature_instance_incident_checklist_templates",
"docgen_feature_instance_checklist_instances",
"docgen_feature_instance_checklist_completions",
"docgen_feature_instance_incident_notes",
"docgen_feature_instance_incident_note_edits",
"docgen_feature_instance_incident_contributors",
"docgen_feature_instance_postmortem_readings",
"docgen_feature_instance_postmortem_dashboards",
"docgen_feature_instance_postmortem_dashboard_views",
"docgen_feature_instance_incident_bookmarks",
"docgen_feature_instance_bookmark_shares",
"docgen_feature_instance_incident_followup_tasks",
"docgen_feature_instance_followup_task_updates",
"docgen_feature_instance_incident_notifications_config",
"docgen_feature_instance_incident_notification_templates",
"docgen_feature_instance_incident_notification_sends",
"docgen_feature_instance_incident_feedback_surveys",
"docgen_feature_instance_incident_feedback_responses",
"docgen_feature_instance_incident_feedback_results",
"docgen_feature_instance_incident_configuration_snapshots",
"docgen_feature_instance_incident_investigation_checklists",
"docgen_feature_instance_investigation_checklist_progress",
"docgen_feature_instance_incident_priority_rules",
"docgen_feature_instance_incident_priority_assignments",
"docgen_feature_instance_incident_pixel_tracking",
"docgen_feature_instance_incident_telemetry_snapshots",
"docgen_feature_instance_incident_log_archives",
"docgen_feature_instance_incident_log_archive_parts",
"docgen_feature_instance_incident_safeguard_rules",
"docgen_feature_instance_safeguard_triggerings",
"docgen_feature_instance_incident_wiki_pages",
"docgen_feature_instance_wiki_page_edits",
"docgen_feature_instance_incident_collaboration_threads",
"docgen_feature_instance_collaboration_posts",
"docgen_feature_instance_collaboration_reactions",
"docgen_feature_instance_incident_versions",
"docgen_feature_instance_incident_version_rollbacks",
"docgen_feature_instance_incident_archival_policies",
"docgen_feature_instance_incident_archival_jobs",
"docgen_feature_instance_incident_archival_logs",
"docgen_feature_instance_incident_retention_events",
"docgen_feature_instance_incident_kpis",
"docgen_feature_instance_incident_kpi_rollups",
"docgen_feature_instance_incident_summary_emails",
"docgen_feature_instance_postmortem_workflows",
"docgen_feature_instance_postmortem_workflow_executions",
"docgen_feature_instance_incident_summaries_index",
"docgen_feature_instance_incident_search_queries",
"docgen_feature_instance_incident_search_results",
"docgen_feature_instance_incident_notifications_stats",
"docgen_feature_instance_incident_analytics_reports",
"docgen_feature_instance_incident_reporting_subscribers",
"docgen_feature_instance_incident_reporting_send_logs",
"docgen_feature_instance_incident_document_snapshots",
"docgen_feature_instance_issue_templates",
"docgen_feature_instance_issue_template_usages",
"docgen_feature_instance_incident_time_series_summaries",
"docgen_feature_instance_incident_tag_references",
"docgen_feature_instance_incident_tag_removals",
"docgen_feature_instance_incident_tag_analytics",
"docgen_feature_instance_incident_owner_oncall_mappings",
"docgen_feature_instance_incident_oncall_notifications",
"docgen_feature_instance_incident_resolution_templates",
"docgen_feature_instance_incident_resolution_runs",
"docgen_feature_instance_incident_readiness_checks",
"docgen_feature_instance_compliance_escrows",
"docgen_feature_instance_escrow_access_logs",
"docgen_feature_instance_manual_interventions",
"docgen_feature_instance_escalation_notifications",
"docgen_feature_instance_incident_reopen_requests",
"docgen_feature_instance_incident_reopen_decisions",
"docgen_feature_instance_incident_reopen_audit",
"docgen_feature_instance_incident_followup_reminders",
"docgen_feature_instance_incident_escalation_state",
"docgen_feature_instance_incident_notification_rate_limits",
"docgen_feature_instance_incident_service_level_histories",
"docgen_feature_instance_incident_alert_mappings",
"docgen_feature_instance_incident_event_annotations",
"docgen_feature_instance_incident_tag_suggestions",
"docgen_feature_instance_incident_search_index_updates",
"docgen_feature_instance_incident_summary_templates",
"docgen_feature_instance_incident_summary_template_usages",
"docgen_feature_instance_postmortem_action_checklists",
"docgen_feature_instance_postmortem_action_checklist_usages",
"docgen_feature_instance_incident_resolution_checklists",
"docgen_feature_instance_incident_resolution_checklist_completions",
"docgen_feature_instance_incident_response_playbooks",
"docgen_feature_instance_incident_response_playbook_runs",
"docgen_feature_instance_incident_response_playbook_templates",
"docgen_feature_instance_incident_response_playbook_template_usages",
"docgen_feature_instance_security_incident_links",
"docgen_feature_instance_incident_compliance_tags",
"docgen_feature_instance_incident_compliance_tag_usages",
"docgen_feature_instance_incident_access_logs",
"docgen_feature_instance_incident_data_exports",
"docgen_feature_instance_incident_data_export_parts",
"docgen_feature_instance_incident_postmortem_transcripts",
"docgen_feature_instance_incident_transcript_annotations",
"docgen_feature_instance_incident_meeting_notes",
"docgen_feature_instance_incident_meeting_recordings",
"docgen_feature_instance_incident_meeting_transcripts",
"docgen_feature_instance_incident_action_metrics",
"docgen_feature_instance_incident_retrospective_surveys",
"docgen_feature_instance_incident_retrospective_responses",
"docgen_feature_instance_incident_retrospective_results",
"docgen_feature_instance_incident_containment_actions",
"docgen_feature_instance_incident_containment_history",
"docgen_feature_instance_incident_root_cause_models",
"docgen_feature_instance_incident_root_cause_model_results",
"docgen_feature_instance_incident_correlation_rules",
"docgen_feature_instance_incident_correlation_results",
"docgen_feature_instance_incident_integrity_checks",
"docgen_feature_instance_incident_integrity_check_results",
"docgen_feature_instance_incident_postmortem_versions",
"docgen_feature_instance_incident_postmortem_version_rollbacks",
"docgen_feature_instance_incident_recovery_plans",
"docgen_feature_instance_incident_recovery_executions",
"docgen_feature_instance_incident_cost_breakdowns",
"docgen_feature_instance_incident_financial_impacts",
"docgen_feature_instance_incident_customer_communications",
"docgen_feature_instance_incident_customer_comm_logs",
"docgen_feature_instance_incident_customer_surveys",
"docgen_feature_instance_incident_customer_survey_responses",
"docgen_feature_instance_incident_customer_compensation_records",
"docgen_feature_instance_incident_legal_hold_records",
"docgen_feature_instance_incident_privacy_notifications",
"docgen_feature_instance_incident_third_party_notifications",
"docgen_feature_instance_incident_service_level_adjustments",
"docgen_feature_instance_incident_service_level_change_history",
"docgen_feature_instance_incident_postmortem_publications",
"docgen_feature_instance_incident_publication_logs",
"docgen_feature_instance_incident_publication_subscribers",
"docgen_feature_instance_incident_publication_send_logs",
"docgen_feature_instance_incident_performance_profiles",
"docgen_feature_instance_incident_performance_profile_changes",
"docgen_feature_instance_incident_endpoint_health_checks",
"docgen_feature_instance_incident_endpoint_health_results",
"docgen_feature_instance_incident_feature_flag_impacts",
"docgen_feature_instance_incident_feature_flag_audits",
"docgen_feature_instance_incident_automation_rules",
"docgen_feature_instance_incident_automation_runs",
"docgen_feature_instance_incident_automation_results",
"docgen_feature_instance_incident_lifecycle_events"
];

for (var i = 0; i < names.length; i++) {
  var name = names[i];

  // Create table template — adjust columns here if you want a different schema
  var createTable = `CREATE OR REPLACE TABLE AI_FEATURE_HUB.${name} (
    id STRING PRIMARY KEY,
    parent_id STRING,
    incident_id STRING,
    instance_ref STRING,
    feature_key STRING,
    org_id STRING,
    payload VARIANT,
    created_at TIMESTAMP_LTZ DEFAULT CURRENT_TIMESTAMP()
  );`;
  snowflake.createStatement({sqlText: createTable}).execute();

  // Create simple INSERT procedure for this table
  var procFullName = `AI_FEATURE_HUB.proc_${name}_insert`;
  var createProc = `CREATE OR REPLACE PROCEDURE ${procFullName}(
    id STRING,
    parent_id STRING DEFAULT NULL,
    incident_id STRING DEFAULT NULL,
    instance_ref STRING DEFAULT NULL,
    feature_key STRING DEFAULT NULL,
    org_id STRING DEFAULT NULL,
    payload VARIANT DEFAULT NULL
  )
  RETURNS STRING
  LANGUAGE SQL
  AS
  $$
    INSERT INTO AI_FEATURE_HUB.${name}(id, parent_id, incident_id, instance_ref, feature_key, org_id, payload, created_at)
    VALUES(:id, :parent_id, :incident_id, :instance_ref, :feature_key, :org_id, :payload, CURRENT_TIMESTAMP());
    RETURN :id;
  $$;`;
  snowflake.createStatement({sqlText: createProc}).execute();
}

return 'Created ' + names.length + ' tables and procedures in AI_FEATURE_HUB successfully.';
$$;